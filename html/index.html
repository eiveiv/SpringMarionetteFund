<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Templating</title>
    <!--<link rel="stylesheet" href="style.css">-->
    <script type="text/javascript" src="../js/underscore.js"></script>
    <script type="text/javascript" src="../js/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="../js/backbone.js"></script>
    <script type="text/javascript" src="../js/backbone.marionette.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/breadcrumb/views.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/breadcrumb/model.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/breadcrumb/index.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/user/router.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/user/model.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/user/views.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/user/controller.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/home/controller.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/home/view.js"></script>
    <script type="text/javascript" src="../Scripts/apps/user-admin/home/router.js"></script>


</head>
<body>


<div class="row">
    <div class="col-md-12">
        <div id="breadcrumbs">

        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div id="app">

        </div>
    </div>
</div>

<script id="index-template" type="text/html">
    <h2>Velkommen til marionette Useradmin</h2>
    <p2>Demon app skrevet i marionette</p2>
    <ul>
        <li><a href="#" id="nav-users-index">Users</a></li>
        <li><a href="#">Roles</a></li>
    </ul>
</script>

<script id="user-layout-template" type="text/html">
    <div class="row">
        <h2>Viewing <%=email%></h2>
    </div>
    <hr/>
    <div id="detail" class="col-md-3 well"></div>
    <div id="summary" class="col-md-8"></div>

</script>  <!--outer view-->
<script id="summary-template" type="text/html">

    <ul>
        <li>Ting 1</li>
        <li>Ting 2</li>
    </ul>

</script>  <!--inner view-->
<script id="detail-template" type="text/html">
    <h2> Detaljer</h2>
</script>  <!--inner view-->

<script>

    var testData = [
        {id: 1, email: "sfds@gmail.com"},
        {id: 2, email: "bbbbb@gmail.com"},
        {id: 3, email: "cccc@gmail.com"},
        {id: 4, email: "ddd@gmail.com"},
    ];

    //DATA


    //App objects
    var UserAdmin = new Backbone.Marionette.Application();
    UserAdmin.addRegions({
        mainReagion: "#app",  //Jquery selecter for 책 hente app div
        navRegion: "#breadcrumbs"
    });


    //Events
    UserAdmin.addInitializer(function () {

        var crumbs = {
            home: {title: "Home", trigger: "index:requested"},
            list: {title: "User Listing", trigger: "user:listing:requested"}
        }

        var breadCrumbs = new BreadCrumbModule(UserAdmin);
        breadCrumbs.load(UserAdmin.navRegion, {title: "Home"});

        //events
        UserAdmin.on("user:selected", function (user) {
            UserAdmin.UserController.showUserDetail(user);
            breadCrumbs.setCrumbs([crumbs.home, crumbs.list, {title: user.get("email")}]);
        });

        UserAdmin.on("user:listing:requested", function () {
            UserAdmin.UserController.showUserList();
            breadCrumbs.setCrumbs([crumbs.home, crumbs.list]);
        });

        UserAdmin.on("index:requested", function () {
            UserAdmin.AppController.showIndex();
            breadCrumbs.setCrumbs(crumbs.home);
        });


    });

    //Initializer
    UserAdmin.addInitializer(function () {


        //N책r vi definerer en region blir det lagt ut rett p책 objektet


        //inits
        UserAdmin.AppController = new AppController();
        UserAdmin.UserRouter = new UserRouter();
        UserAdmin.HomeRouter = new HomeRouter();
        UserAdmin.UserController = new UserController();
        UserAdmin.Users = new UsersCollection(testData);


        //starts
        Backbone.history.start();
    });


    //Bruker itemview hvis det er et view du bare tenker bruke en gang, kan bruke bare view istedenfor, men da m책 det opprettes


    UserAdmin.start();

</script>
</body>
</html>